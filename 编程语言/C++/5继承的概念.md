# 5 继承的概念

[TOC]



## 5.1 继承的基本知识

​	**继承定义了类与类之间的关系，其中一个类共享在一个或多个类中定义的结构和（或）行为**。 如果一个类只共享（继承）一个类的结构和行为，称为**单一继承**，如果涉及多个类，则称为**多重继承**。

​	**C++支持私有派生的概念**，稀有派生不是真正的继承。**is-a**意味着共有继承。

## 5.2 is-a关系的含义

​	**is-a**关系意味着基类与派生类之间**一般/特殊**的关系。基类是一般类，它的行为可以在培生类中特殊化。

1. 在任何情况下，**TStudent**类对象一定是**TPerson**类对象。
2. 在任何情况下，派生类对象都可以看作是基类对象。

## 5.3 继承关系的效果

```c++
bool PrintMailingLabel(const TPersion& aPerson){
    TString name = aPerson.GetName();
    TString addr = aPerson.GetAddress();
}
TStudent aStudentObject("Lassie", 423435063, "09-24-69", "Disney Land", eFullTime, eArts);
PrintMailingLabel(aStudentObject);
```

### 5.3.1 直接基类和间接基类

​	TPerson，TStudent，TGraduateStudent， 相对关系。

## 5.4 多态置换原则

​	如果D类的每个对象Derived，都有一个B类的对象Bbase，当对象Dderived置换对象Bbase时，在B类中定义的F函数以及F函数的行为都不会变化，则D类是B类的子类型。

```C++
void F(B& aBobject){
    //...
}
D Dervied;
F(Dervied);
```

```c++
main(){
    TStudent aStudent("Lassie", 423435063, "09-24-69", "Disney Land", eFullTime, eArts);
	TPerson& rp = aStudent;
    
    TPerson *pp = new TStudent("Mickey", 423995063, "07-22-65", "Disney Land", eFullTime, eArts);
    TPerson aPerson("Phantom", 12344032, "1-1-1970", "Fantasy World");
    aPerson = aStudent;
}
```

### 5.4.1 初始化基类对象

​	在调用派生的构造函数时，每个派生类都应该初始化它的基类，而且应在在构造函数的初始化阶段完成。

* 一定要记住，以正确的参数作为派生类构造函数的一部分，才能调用直接基类的构造函数。

* 类只能调用它的直接基类的构造函数，不能调用非直接基类的构造函数。这种限制只有在使用虚基类的情况才不那么严格。

* 派生类无法继承基类的构造函数。

* `Tstudnet::TStudent(const TStudent& copy) : TPerson(copy)` 一定要通过派生类复制构造函数来调用基类复制构造函数

* 一定要通过赋值操作符在其内部调用基类的幅值操作符，否则对象的状态会不一致。

## 5.7 动态绑定、虚函数和多态性

### 5.7.1 动态绑定的含义

### 5.7.2 动态绑定的支持——虚函数

## 5.8 继承对数据封装的影响

## 5.9 多态的含义

### 5.10 有效使用虚函数



